<!doctype html>
<html lang="ja">
  <head>
    <%- include('../meta'); -%>
    <script src="/deleteArticle.js" defer></script>
  </head>
  <body>
    <%- include('../header'); -%> <%- include('userInfo'); -%>
    <div class="bg-primary p-2 text-dark bg-opacity-10 border">
      <h2>新規記事の作成</h2>
      <form action="/articles" method="post">
        <label for="title">タイトル</label>
        <input type="text" name="title" />
        <label for="content">内容</label>
        <input type="text" name="content" size="80" />
        <input type="submit" value="登録" class="alert alert-primary" />
      </form>
    </div>

    <div class="bg-success p-2 text-dark bg-opacity-10 border">
      <h2>全記事一覧</h2>
      <table class="table table-striped">
        <tr>
          <th>タイトル</th>
          <th>内容</th>
          <th>最終更新</th>
          <th>編集</th>
          <th>削除</th>
        </tr>
        <% for (const article of articles.articles) { %>
        <tr>
          <td><%= article.title %></td>
          <td><%= article.content %></td>
          <td><%= article.updateDate %></td>
          <td>
            <input
              type="button"
              value="編集"
              class="alert alert-success"
              onclick="location.href='/articles/<%= article.id %>'"
            />
          </td>
          <td>
            <input
              type="button"
              value="削除"
              class="alert alert-dark"
              onclick="deleteArticle('<%= article.id %>')"
            />
          </td>
        </tr>
        <% } %>
      </table>
    </div>

    <%- include('../footer'); -%>
  </body>
</html>
